**********
SF3dmodels
**********
  
This is the documentation for the Star-Forming regions 3D Modelling package.

Find the source code on `GitHub`_.

.. image:: http://img.shields.io/badge/powered%20by-AstroPy-orange.svg?style=flat
    :target: http://www.astropy.org
    :alt: Powered by Astropy Badge

SF3dmodels is a star forming region(s) modelling package that brings together
analytical models in order to compute their physical properties in a 3-dimensional grid. 
The package can couple different models in a single grid to recreate complex star
forming systems as those being revealed by current data. 
The output data can be read with `LIME`_ or `RADMC-3D`_
to carry out radiative transfer calculations of the model.

Requirements
============

* `Astropy <http://docs.astropy.org/en/stable/install.html>`__
* `Numpy <https://www.scipy.org/install.html>`_
* `Matplotlib <https://matplotlib.org/users/installing.html>`_
* `IPython <https://ipython.org/install.html>`_ (optional, but recommended)

Installation (from source)
==========================

`Download`_ or clone the star-forming-regions repository from `GitHub`_:

To clone the package, if you have a github account:

.. code-block:: bash

   $ git clone git@github.com:andizq/star-forming-regions.git

if you don't have one:

.. code-block:: bash

   $ git clone https://github.com/andizq/star-forming-regions.git

Using the command line go into the folder and run the ``setup.py`` installation script:

.. code-block:: bash

   $ cd /path/to/local/star-forming-regions/
   $ python setup.py install


Using sf3dmodels
================

.. toctree::
  :maxdepth: 1
  
  single_source/single_source.rst	
  two_sources/two_sources.rst
  ionized_sources/ionized_sources.rst


LIME in *sf3dmodels* mode
=========================

The package contains the standard LIME v1.9.5 + an additional feature for ``sf3dmodels`` users. 
An ingestor was included within the LIME source codes, it allows the user to employ the ``sf3dmodels`` output as the LIME input. 

Installation
------------

LIME must be configured separately once the ``sf3dmodels`` package has been installed with success. 

The installation procedure of this LIME is identical to its standard installation 
(have a look at the `LIME installation notes <https://github.com/andizq/lime/tree/sf3dmodels>`_ section). Make 
sure you are configuring and setting everything in/to the LIME directory included in this repository.

Running it
----------

The ingestor will look for the ``.dat`` files generated by ``sf3dmodels`` and load them within the LIME environment. 
To invoke this option, a ``-S`` flag (in capital letter) must be added in the usual LIME running command as follows:

.. code-block:: bash

   $ lime -S model.c

The LIME standard command line options may also be invoked. For instance, to run LIME in a 
non-interactive mode and read the ``sf3dmodels`` output as well you should run:

.. code-block:: bash

   $ lime -n -S model.c


*Note* that if the ``-S`` option *is not set* you will get back the 'traditional' operation of LIME.

LIME Examples
^^^^^^^^^^^^^

Take a look at the folder ``example_sf3dmodels/`` included in the submodule ``lime/`` of this repository.


License
=======

This project is Copyright (c) Andres Izquierdo and licensed under
the terms of the BSD 3-Clause license. This package is based upon
the `Astropy package template <https://github.com/astropy/package-template>`_
which is licensed under the BSD 3-clause licence. See the licenses folder for
more information.


Citing sf3dmodels
=================

If you find the ``sf3dmodels`` package useful for your work please cite `Izquierdo et al. 2018`_.


Reference/API
=============

.. automodapi:: sf3dmodels
   :no-inheritance-diagram:

.. automodapi:: sf3dmodels.Model
   :no-inheritance-diagram:

.. automodapi:: sf3dmodels.Plot_model	   
   :no-inheritance-diagram:
  
.. warning:: This documentation is currently under development.
